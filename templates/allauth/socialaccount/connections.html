{% extends "layouts/manage.html" %}
{% load i18n %}
{% load allauth %}

{% block head_title %}
  {% trans "Account Connections" %}
{% endblock head_title %}

{% block hero_content %}
  <style>
    .futuristic-red-card {
      background: rgba(50, 0, 0, 0.07);
      border: 1px solid rgba(255, 30, 86, 0.2);
      backdrop-filter: blur(8px);
      border-radius: 16px;
      box-shadow: 0 0 16px rgba(255, 30, 86, 0.15);
    }

    .futuristic-red-header {
      background: linear-gradient(135deg, #ff1e56, #8b0000);
      color: #fff;
      font-size: 1rem;
      font-weight: 600;
      padding: 1rem;
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;
    }

    .futuristic-red-body {
      padding: 1.5rem;
      color: #e0e0e0;
    }

    .list-group-item {
      background: transparent;
      border: 1px solid rgba(255, 30, 86, 0.2);
      margin-bottom: 0.5rem;
      border-radius: 10px;
      padding: 0.8rem 1rem;
      color: #f2f2f2;
    }

    .form-check-input {
      accent-color: #ff4d4d;
    }

    .btn-remove {
      font-size: 0.75rem;
      background-color: transparent;
      border: 1px solid #ff4d4d;
      color: #ffb3b3;
      border-radius: 6px;
      padding: 0.4rem 1.2rem;
      transition: all 0.3s ease;
      animation: pulseBtnRed 2s infinite;
    }

    .btn-remove:hover {
      background-color: #ff4d4d;
      color: #000;
      box-shadow: 0 0 10px #ff4d4d;
      animation: none;
    }

    .badge.bg-secondary {
      background-color: #770000 !important;
      color: #ffcccc;
    }

    @keyframes pulseBtnRed {
      0%, 100% {
        box-shadow: 0 0 10px rgba(255, 30, 86, 0.3);
      }
      50% {
        box-shadow: 0 0 20px rgba(255, 30, 86, 0.6);
      }
    }
  </style>

  <div class="futuristic-red-card shadow-sm">
    <div class="futuristic-red-header">
      <h3 class="mb-0">{% trans "Account Connections" %}</h3>
    </div>
    <div class="futuristic-red-body">
      {% if form.accounts %}
        <p class="mb-3">
          {% blocktrans %}
            You can sign in to your account using any of the following third-party accounts:
          {% endblocktrans %}
        </p>
        {% url 'socialaccount_connections' as action_url %}
        <form method="post" action="{{ action_url }}">
          {% csrf_token %}
          <div class="list-group mb-3">
            {% for acc in form.fields.account.choices %}
              {% with account=acc.0.instance.get_provider_account %}
                {% setvar radio_id %}id_account_{{ account.account.pk }}{% endsetvar %}
                <div class="list-group-item">
                  <div class="form-check">
                    <input type="radio"
                           class="form-check-input"
                           id="{{ radio_id }}"
                           name="account"
                           value="{{ account.account.pk }}">
                    <label class="form-check-label" for="{{ radio_id }}">
                      {{ account }}
                      <span class="badge bg-secondary">
                        {{ account.get_brand.name }}
                      </span>
                    </label>
                  </div>
                </div>
              {% endwith %}
            {% endfor %}
          </div>
          <div class="d-flex justify-content-end">
            <button type="submit" class="btn btn-remove">
              {% trans 'Remove' %}
            </button>
          </div>
        </form>
      {% else %}
        <p class="mb-3">
          {% trans 'You currently have no third-party accounts connected to this account.' %}
        </p>
      {% endif %}
      <hr>
      <h2 class="h5 mt-4 text-danger">{% trans 'Add a Third-Party Account' %}</h2>
      {% include "socialaccount/snippets/provider_list.html" with process="connect" %}
      {% include "socialaccount/snippets/login_extra.html" %}
    </div>
  </div>
{% endblock hero_content %}
